"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è Telegram-–±–æ—Ç–∞ –∫—É—Ä—å–µ—Ä—Å–∫–æ–π —Å–ª—É–∂–±—ã.

–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–í–ê–ñ–ù–û: –ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env —Å –≤–∞—à–∏–º–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏!
"""

import os
from typing import Dict, List
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ .env
load_dotenv()

# =============================================================================
# –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ë–û–¢–ê
# =============================================================================

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
BOT_TOKEN = os.getenv('BOT_TOKEN')
if not BOT_TOKEN:
    raise ValueError("BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω! –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω")

# –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite
DATABASE_URL = os.getenv('DATABASE_URL', 'sqlite+aiosqlite:///courier_bot.db')

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –ú–ê–†–®–†–£–¢–û–í
# =============================================================================

# –î–æ—Å—Ç—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–∑ –Ø—Ä–æ—Å–ª–∞–≤–ª—è
AVAILABLE_ROUTES: Dict[str, List[Dict]] = {
    "–í–æ–ª–æ–≥–¥–∞": [
        {
            "name": "–ö–î–õ –í–æ–ª–æ–≥–¥–∞",
            "address": "—É–ª. –ú–∏—Ä–∞, 15, –í–æ–ª–æ–≥–¥–∞",
            "organization": "–ö–î–õ",
            "coordinates": (59.2239, 39.8840)
        },
        {
            "name": "–•–æ–≤–µ—Ä –í–æ–ª–æ–≥–¥–∞", 
            "address": "–ø—Ä. –ü–æ–±–µ–¥—ã, 42, –í–æ–ª–æ–≥–¥–∞",
            "organization": "–•–æ–≤–µ—Ä",
            "coordinates": (59.2078, 39.8958)
        },
        {
            "name": "–î–∞—Ä—Ç–∏—Å –í–æ–ª–æ–≥–¥–∞",
            "address": "—É–ª. –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è, 120, –í–æ–ª–æ–≥–¥–∞", 
            "organization": "–î–∞—Ä—Ç–∏—Å",
            "coordinates": (59.2181, 39.8947)
        }
    ],
    "–ò–≤–∞–Ω–æ–≤–æ": [
        {
            "name": "–ö–î–õ –ò–≤–∞–Ω–æ–≤–æ",
            "address": "—É–ª. 8 –ú–∞—Ä—Ç–∞, 32, –ò–≤–∞–Ω–æ–≤–æ",
            "organization": "–ö–î–õ", 
            "coordinates": (56.9991, 40.9731)
        },
        {
            "name": "–•–æ–≤–µ—Ä –ò–≤–∞–Ω–æ–≤–æ",
            "address": "—É–ª. –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è, 8, –ò–≤–∞–Ω–æ–≤–æ",
            "organization": "–•–æ–≤–µ—Ä",
            "coordinates": (57.0000, 40.9811)
        }
    ],
    "–ö–æ—Å—Ç—Ä–æ–º–∞": [
        {
            "name": "–ö–î–õ –ö–æ—Å—Ç—Ä–æ–º–∞", 
            "address": "–ø—Ä. –ú–∏—Ä–∞, 144, –ö–æ—Å—Ç—Ä–æ–º–∞",
            "organization": "–ö–î–õ",
            "coordinates": (57.7665, 40.9265)
        },
        {
            "name": "–î–∞—Ä—Ç–∏—Å –ö–æ—Å—Ç—Ä–æ–º–∞",
            "address": "—É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 95, –ö–æ—Å—Ç—Ä–æ–º–∞",
            "organization": "–î–∞—Ä—Ç–∏—Å", 
            "coordinates": (57.7648, 40.9276)
        }
    ]
}

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –î–û–°–¢–ê–í–ö–ò –í –ú–û–°–ö–í–£  
# =============================================================================

# –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –ú–æ—Å–∫–≤–µ –¥–ª—è –∫–∞–∂–¥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
MOSCOW_DELIVERY_ADDRESSES: Dict[str, Dict] = {
    "–ö–î–õ": {
        "address": "—É–ª. –ü—Ä–æ—Ñ—Å–æ—é–∑–Ω–∞—è, 86, –ú–æ—Å–∫–≤–∞",
        "contact": "+7 495 123-45-67",
        "working_hours": "09:00-18:00"
    },
    "–•–æ–≤–µ—Ä": {
        "address": "–õ–µ–Ω–∏–Ω—Å–∫–∏–π –ø—Ä., 37, –ú–æ—Å–∫–≤–∞", 
        "contact": "+7 495 987-65-43",
        "working_hours": "08:00-20:00"
    },
    "–î–∞—Ä—Ç–∏—Å": {
        "address": "—É–ª. –ù–æ–≤—ã–π –ê—Ä–±–∞—Ç, 24, –ú–æ—Å–∫–≤–∞",
        "contact": "+7 495 555-12-34", 
        "working_hours": "10:00-19:00"
    }
}

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –°–ò–°–¢–ï–ú–´
# =============================================================================

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
MAX_PHOTO_UPLOAD_ATTEMPTS = 3

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
USER_RESPONSE_TIMEOUT = 300  # 5 –º–∏–Ω—É—Ç

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
MIN_CONTAINERS = 0
MAX_CONTAINERS = 999

# –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±–æ—Ç–∞ (Telegram ID)
admin_ids_str = os.getenv('ADMIN_IDS', '')
if admin_ids_str:
    ADMIN_IDS = [int(id.strip()) for id in admin_ids_str.split(',') if id.strip().isdigit()]
else:
    ADMIN_IDS = [1066894931,421576269]

# =============================================================================
# –¢–ï–ö–°–¢–û–í–´–ï –°–û–û–ë–©–ï–ù–ò–Ø
# =============================================================================

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
WELCOME_MESSAGE = """
üöö <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –∫—É—Ä—å–µ—Ä—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏!</b>

–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:
‚Ä¢ –í—ã–±—Ä–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–ª—è —Å–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤
‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∞–¥—Ä–µ—Å–∞–º  
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã –≤ –ú–æ—Å–∫–≤—É

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞–∂–º–∏—Ç–µ <b>–í—ã–±—Ä–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç</b>
"""

HELP_MESSAGE = """
üöö <b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫—É—Ä—å–µ—Ä–∞</b>

<b>üéØ –ß—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å:</b>

üó∫Ô∏è <b>–í—ã–±—Ä–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç</b>
‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "üöö –í—ã–±—Ä–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç"
‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞
‚Ä¢ –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞
‚Ä¢ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

üìã <b>–ü—Ä–æ–π—Ç–∏ –º–∞—Ä—à—Ä—É—Ç:</b>
1Ô∏è‚É£ –ü—Ä–∏–±—ã–ª–∏ –Ω–∞ —Ç–æ—á–∫—É ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ "üì∏ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ—á–∫—É"
2Ô∏è‚É£ –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (1 –∏–ª–∏ –±–æ–ª—å—à–µ)
3Ô∏è‚É£ –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
4Ô∏è‚É£ –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ç–æ—á–∫–µ
5Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ "üöÄ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç"

‚è≠Ô∏è <b>–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–æ—á–∫—É:</b>
‚Ä¢ –ï—Å–ª–∏ —Ç–æ—á–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Üí "‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–æ—á–∫—É"

üìä <b>–ú–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã:</b>
‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚Ä¢ –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
‚Ä¢ –ò—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è–º

üè• <b>–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞:</b>
‚Ä¢ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞–∂–¥–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏
‚Ä¢ –î–æ–±–∞–≤—å—Ç–µ –∏—Ç–æ–≥–æ–≤—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
‚Ä¢ –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

üí° <b>–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:</b>
‚úÖ –î–µ–ª–∞–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
‚úÖ –£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚úÖ –ü–∏—à–∏—Ç–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚úÖ –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è–º

‚ùì <b>–í–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã?</b> –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
"""

# –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
ERROR_MESSAGES = {
    "invalid_photo": "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.",
    "invalid_containers_count": f"‚ùå –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç {MIN_CONTAINERS} –¥–æ {MAX_CONTAINERS}",
    "route_not_selected": "‚ùå –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç!",
    "photo_required": "üì∏ –°–Ω–∞—á–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —Å –º–µ—Å—Ç–∞ –∑–∞–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–∞",
    "access_denied": "‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏"
}