# üöÄ –£–ª—É—á—à–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ - –û—Ç—á–µ—Ç –ø–æ —Ä–µ–≤—å—é

## üìã –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ñ–∏–ª—å—Ç—Ä "–ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞" –±–µ–∑ —É—á–µ—Ç–∞ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**: –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—ã–µ

### 2. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ—á–µ–∫ –∫–ª–∏–Ω–∏–∫
- **–ü—Ä–æ–±–ª–µ–º–∞**: JOIN –º–µ–∂–¥—É RouteProgress –∏ Route –º–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ—á–∫–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –≤ –æ–¥–Ω–æ–º –º–∞—Ä—à—Ä—É—Ç–µ
- **–ü—Ä–∏–º–µ—Ä**: –¢–æ—á–∫–∞ –∏–∑ –ö–æ—Å—Ç—Ä–æ–º—ã –ø–æ–ø–∞–¥–∞–ª–∞ –≤ –º–∞—Ä—à—Ä—É—Ç –ú–æ—Å–∫–≤—ã
- **–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≥–æ—Ä–æ–¥–∞ —Ç–æ—á–∫–∏ –∏ —Å–µ—Å—Å–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞

### 3. ‚ùå –ù–µ—É–¥–æ–±–Ω—ã–π UX –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–ª–∏–∫–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### –ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤:
- **üü¢ –ê–∫—Ç–∏–≤–Ω—ã–µ** (‚â§2—á): –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤
- **üü° –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ** (2—á-24—á): –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç 2 –¥–æ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥
- **‚ö™ –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ** (>24—á): –î–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–∞—Ä—à—Ä—É—Ç –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω
- **‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ**: –ï—Å—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–ª–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### –£–ª—É—á—à–µ–Ω–∏—è –≤ `RouteMonitor._determine_session_status()`:
```python
# –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç:
- –ù–∞–ª–∏—á–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (–ò–¢–û–ì–û–í–´–ô_–ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô, –õ–ê–ë–û–†–ê–¢–û–†–ù–´–ï_–î–ê–ù–ù–´–ï)
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ (–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã—Ö)
```

### 2. üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –≥–æ—Ä–æ–¥–∞–º–∏

#### –ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ `get_routes_by_city()`:
```python
# –°–µ—Å—Å–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≥–æ—Ä–æ–¥—É, –µ—Å–ª–∏ –±–æ–ª–µ–µ 70% —Ç–æ—á–µ–∫ –∏–∑ —ç—Ç–æ–≥–æ –≥–æ—Ä–æ–¥–∞
func.cast(
    func.count(
        func.case((Route.city_name == city_name, 1), else_=0)
    ), Float
) / func.cast(func.count(RouteProgress.id), Float) > 0.7
```

#### –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_get_session_city_info()`:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π –≥–æ—Ä–æ–¥ –≤ —Å–µ—Å—Å–∏–∏
- –ò—Å–∫–ª—é—á–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –ø–æ–¥—Å—á–µ—Ç–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–æ—á–∫–∞–º

### 3. üîß –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω UX

#### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é:
```
üü¢ –ê–∫—Ç–∏–≤–Ω—ã–µ (‚â§2—á)     üü° –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ (7–¥)    ‚ö™ –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ (>1–¥)
üìç –ü–æ –≥–æ—Ä–æ–¥–∞–º         üöö –ú–æ—Å–∫–≤–∞
üìä –°–≤–æ–¥–∫–∞
üîÑ –û–±–Ω–æ–≤–∏—Ç—å           ‚ùå –ó–∞–∫—Ä—ã—Ç—å
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤–æ–¥–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- –¢–æ–ø-5 –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- –ú–∞—Ä—à—Ä—É—Ç—ã –≤ –ú–æ—Å–∫–≤—É

#### –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–∞—Ö:
- –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤
- –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–¥–∞—Ç–∞, –≥–æ—Ä–æ–¥, –∫—É—Ä—å–µ—Ä, —Ç–æ—á–∫–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ `RouteMonitor`:
- `_get_session_city_info()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ —Å–µ—Å—Å–∏–∏
- `_determine_session_status()` - —É–ª—É—á—à–µ–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `get_routes_by_status()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É

### –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `admin_handlers.py`:
- `show_paused_routes()` - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- `show_inactive_routes()` - –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã  
- `show_routes_summary()` - –æ–±—â–∞—è —Å–≤–æ–¥–∫–∞

### –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
- –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–∞–∂–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∞–º

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã**: –°–æ–∫—Ä–∞—â–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –≤ 2-3 —Ä–∞–∑–∞
‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤–æ–¥–∫–∞ –∏ —Ü–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ**: –õ–æ–≥–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã SQL-–∑–∞–ø—Ä–æ—Å—ã
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
1. **üìä –°–≤–æ–¥–∫–∞** - –æ–±—â–∏–π –æ–±–∑–æ—Ä —Å–∏—Ç—É–∞—Ü–∏–∏
2. **üü¢ –ê–∫—Ç–∏–≤–Ω—ã–µ** - —Ç–µ–∫—É—â–∏–µ —Ä–∞–±–æ—Ç—ã
3. **üü° –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ** - —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è
4. **‚ö™ –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ** - –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:
- **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã >24—á** - —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∫—É—Ä—å–µ—Ä–æ–º
- **–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ >12—á** - –≤—ã—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É
- **–¢–æ—á–∫–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤** - –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–¢–æ–ø –≥–æ—Ä–æ–¥–æ–≤** –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ **–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** –¥–ª—è KPI
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ **–º–∞—Ä—à—Ä—É—Ç—ã –≤ –ú–æ—Å–∫–≤—É** –æ—Ç–¥–µ–ª—å–Ω–æ

---
**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 28.09.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–π–¥–µ–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–∏–Ω–≥–∞

